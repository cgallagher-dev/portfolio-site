---
import { HiUserGroup } from "react-icons/hi";
---

<section class="relative flex items-center justify-center px-4 py-16">
  <div class="mx-auto flex max-w-4xl flex-col items-center gap-10 md:flex-row">
    <div
      class="bg-gray-900 border-none flex w-full flex-col justify-center rounded-2xl border p-8 shadow-lg md:w-full drop-shadow-[4px_4px_0_#69c7c7]"
    >
      <div class="flex items-center gap-4 mb-4">
        <HiUserGroup className="text-[#69c7c7]" size={40} />
        <h2
          class="text-white text-3xl md:text-4xl font-bold drop-shadow-[2px_2px_0_#69c7c7]"
        >
          Leadership: Chair of RUN-EU Student Council
        </h2>
      </div>

      <div class="mt-4 mb-4 grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="flex items-baseline gap-2">
          <span
            class="counter text-5xl md:text-6xl font-extrabold text-[#69c7c7] drop-shadow-[0_0_15px_rgba(105,199,199,0.3)]"
            data-target="15000">0</span
          >
          <span class="text-4xl font-bold text-white">Students</span>
        </div>
        <div class="flex items-baseline gap-2">
          <span
            class="counter text-5xl md:text-6xl font-extrabold text-[#69c7c7] drop-shadow-[0_0_15px_rgba(105,199,199,0.3)]"
            data-target="9">0</span
          >
          <span class="text-4xl font-bold text-white">Countries</span>
        </div>
      </div>

      <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-gray-800/50 p-4 rounded-xl border border-white/5">
          <h3 class="text-[#69c7c7] font-bold mb-2">Governance & Strategy</h3>
          <ul class="text-sm text-gray-300 list-disc pl-5 space-y-2">
            <li>
              Leading cross-disciplinary teams and international student
              governance across the Regional University Network (RUN-EU).
            </li>
            <li>
              Utilising strategic diplomacy to drive the development of European
              Degrees.
            </li>
          </ul>
        </div>
        <div class="bg-gray-800/50 p-4 rounded-xl border border-white/5">
          <h3 class="text-[#69c7c7] font-bold mb-2">Advocacy</h3>
          <ul class="text-sm text-gray-300 list-disc pl-5 space-y-2">
            <li>
              Representing students through public speaking and international
              leadership.
            </li>
            <li>
              Liaising with the Board of Rectors to ensure student-centred
              decision-making.
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const counters = document.querySelectorAll(".counter");

  const options = {
    root: null,
    rootMargin: "0px",
    threshold: 0.5,
  };

  const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        const counter = entry.target as HTMLElement;
        const targetAttr = counter.getAttribute("data-target");
        if (!targetAttr) return;

        const target = +targetAttr;
        const duration = 2000; // Animation duration in ms
        const increment = target / (duration / 16); // 60 FPS update

        let current = 0;
        const updateCounter = () => {
          current += increment;
          if (current < target) {
            counter.innerText = Math.ceil(current).toLocaleString();
            requestAnimationFrame(updateCounter);
          } else {
            counter.innerText =
              target.toLocaleString() + (target > 100 ? "+" : "");
          }
        };

        updateCounter();
        observer.unobserve(counter);
      }
    });
  }, options);

  counters.forEach((counter) => {
    observer.observe(counter);
  });
</script>
